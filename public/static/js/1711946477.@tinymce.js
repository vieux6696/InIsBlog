import{w as n,d as e,x as t,r as o,y as i,z as r,A as a,B as u,C as l,j as s}from"./1711946477.@vue.js";var c,d=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],f=function(n){return-1!==d.map((function(n){return n.toLowerCase()})).indexOf(n.toLowerCase())},p=function(e,t,o,i,r,a){i.setContent(a()),o.attrs["onUpdate:modelValue"]&&function(e,t,o,i){var r=e.modelEvents?e.modelEvents:null,a=Array.isArray(r)?r.join(" "):r;n(i,(function(n,t){o&&"string"==typeof n&&n!==t&&n!==o.getContent({format:e.outputFormat})&&o.setContent(n)})),o.on(a||"change input undo redo",(function(){t.emit("update:modelValue",o.getContent({format:e.outputFormat}))}))}(t,o,i,r),function(n,e,t){Object.keys(e).filter(f).forEach((function(o){var i=e[o];"function"==typeof i&&("onInit"===o?i(n,t):t.on(o.substring(2),(function(n){return i(n,t)})))}))}(e,o.attrs,i)},v=0,g=function(n){var e=Date.now();return n+"_"+Math.floor(1e9*Math.random())+ ++v+String(e)},m=function(n){return void 0===n||""===n?[]:Array.isArray(n)?n:n.split(" ")},y=function(){return{listeners:[],scriptId:g("tiny-script"),scriptLoaded:!1}},C=(c=y(),{load:function(n,e,t){c.scriptLoaded?t():(c.listeners.push(t),n.getElementById(c.scriptId)||function(n,e,t,o){var i=e.createElement("script");i.referrerPolicy="origin",i.type="application/javascript",i.id=n,i.src=t;var r=function(){i.removeEventListener("load",r),o()};i.addEventListener("load",r),e.head&&e.head.appendChild(i)}(c.scriptId,n,e,(function(){c.listeners.forEach((function(n){return n()})),c.scriptLoaded=!0})))},reinitialize:function(){c=y()}}),S=function(){var n="undefined"!=typeof window?window:global;return n&&n.tinymce?n.tinymce:null},h={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(n){return"html"===n||"text"===n}}},b=globalThis&&globalThis.__assign||function(){return b=Object.assign||function(n){for(var e,t=1,o=arguments.length;t<o;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},b.apply(this,arguments)},w={selector:void 0,target:void 0},D=e({props:h,setup:function(e,c){var d=e.init?b(b({},e.init),w):b({},w),f=t(e),v=f.disabled,y=f.modelValue,h=f.tagName,D=o(null),E=null,A=e.id||g("tiny-vue"),O=e.init&&e.init.inline||e.inline,j=!!c.attrs["onUpdate:modelValue"],M=!0,B=e.initialValue?e.initialValue:"",P="",x=function(){var n,t,o,i=(n=M,j?function(){return(null==y?void 0:y.value)?y.value:""}:function(){return n?B:P}),r=b(b({},d),{readonly:e.disabled,target:D.value,plugins:(t=d.plugins,o=e.plugins,m(t).concat(m(o))),toolbar:e.toolbar||d.toolbar,inline:O,setup:function(n){E=n,n.on("init",(function(t){return p(t,e,c,n,y,i)})),"function"==typeof d.setup&&d.setup(n)}});(function(n){return null!==n&&"textarea"===n.tagName.toLowerCase()})(D.value)&&(D.value.style.visibility=""),S().init(r),M=!1};n(v,(function(n){var e;null!==E&&("function"==typeof(null===(e=E.mode)||void 0===e?void 0:e.set)?E.mode.set(n?"readonly":"design"):E.setMode(n?"readonly":"design"))})),n(h,(function(n){var e;j||(P=E.getContent()),null===(e=S())||void 0===e||e.remove(E),s((function(){return x()}))})),i((function(){if(null!==S())x();else if(D.value&&D.value.ownerDocument){var n=e.cloudChannel?e.cloudChannel:"6",t=e.apiKey?e.apiKey:"no-api-key",o=null==e.tinymceScriptSrc?"https://cdn.tiny.cloud/1/".concat(t,"/tinymce/").concat(n,"/tinymce.min.js"):e.tinymceScriptSrc;C.load(D.value.ownerDocument,o,x)}})),r((function(){null!==S()&&S().remove(E)})),O||(a((function(){M||x()})),u((function(){var n;j||(P=E.getContent()),null===(n=S())||void 0===n||n.remove(E)})));return c.expose({rerender:function(n){var e;P=E.getContent(),null===(e=S())||void 0===e||e.remove(E),d=b(b(b({},d),n),w),s((function(){return x()}))},getEditor:function(){return E}}),function(){return O?function(n,e,t,o){return n(o||"div",{id:e,ref:t})}(l,A,D,e.tagName):l("textarea",{id:A,visibility:"hidden",ref:D})}}});export{D as E};
