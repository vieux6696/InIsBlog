import{a as s,n as a}from"./1711946477.index.js";import{a6 as t,y as e,w as l,aj as i,as as n,o,c,l as r,J as u,a as d,s as g,a2 as p,a3 as m,F as h}from"./1711946477.@vue.js";const f={class:"card mb-3"},v={class:"card-body"},y={class:"text-muted text-uppercase mt-0"},x=d("strong",{class:"text-danger"},"风险操作！此功能不懂请勿开启！",-1),b=d("br",null,null,-1),_=d("strong",{class:"text-danger"},"i-api-key=密钥",-1),w=d("br",null,null,-1),I={class:"d-inline-flex align-items-center"},P=d("span",{class:"ms-1"},"API KEY",-1),k={class:"m-b-20"},A=d("span",{class:"badge bg-primary font-white"}," +90% ",-1),E={class:"text-muted ms-1"},Y=d("strong",{class:"flex-center"},"配置",-1),K=d("p",{class:"my-1"},"● API KEY 不是什么很NB的技术，却能大大提高的接口安全",-1),V=d("p",{class:"my-1"},"● 正常来说不开启也没关系，因为除此之外还有QPS限流器在帮你拦截异常流量",-1),S=d("p",{class:"my-1"},"● 但是如果您开启了API KEY，在使用其它主题的时候，需要按照要求配置密钥到您的主题中，否则主题会拿不到任何数据",-1),C={__name:"api-key",setup(C,{expose:j}){const z=t({struct:{},status:{finish:!1,active:!1,dialog:!1,loading:!0}});e((async()=>{await M.init()}));const M={init:async()=>{z.status.finish=!1,z.status.loading=!0;const{code:a,data:t}=await s.get("/api/config/one",{key:"SYSTEM_API_KEY"});z.status.loading=!1,200===a&&(z.struct=t,z.status.finish=!0)},show(){if(!z.status.finish)return a.warn("API KEY配置获取失败，无法进行配置！");z.status.dialog=!0},change:async t=>{const{code:e,msg:l}=await s.post("/api/config/save",{key:"SYSTEM_API_KEY",value:t?1:0});200!==e&&(z.status.active=!t,a.error(l))}};return l((()=>z.struct),(()=>{z.status.active=1===parseInt(z.struct.value)}),{deep:!0}),j({init:M.init}),(s,a)=>{const t=i("i-svg"),e=i("el-tooltip"),l=i("el-switch"),C=i("el-button"),j=i("el-dialog"),T=n("loading");return o(),c(h,null,[r((o(),c("div",f,[d("div",v,[g(t,{name:"security-1",size:"60px",color:"rgb(var(--assist-color))",class:"position-absolute opacity-25",style:{right:"1.5rem"}}),d("h6",y,[g(e,{placement:"top"},{content:p((()=>[x,b,m(" ● 开启之后，所有的API均需要在请求头中提交 "),_,m(" 方能使用！"),w,m(" ● 于此同时API安全性将提升90%，剩下10%取决于你的密钥复杂度和对手的能力强弱！ ")])),default:p((()=>[d("span",I,[g(t,{name:"hint",color:"rgb(var(--icon-color))",size:"14px"}),P])])),_:1})]),d("h2",k,[g(l,{modelValue:u(z).status.active,"onUpdate:modelValue":a[0]||(a[0]=s=>u(z).status.active=s),onChange:M.change,disabled:!u(z).status.finish,"active-text":"开启","inactive-text":"关闭"},null,8,["modelValue","onChange","disabled"])]),A,d("span",E,[m(" 安全性提升，"),d("span",{onClick:a[1]||(a[1]=s=>M.show()),class:"text-dark pointer"},"点我查看")])])])),[[T,u(z).status.loading]]),g(j,{modelValue:u(z).status.dialog,"onUpdate:modelValue":a[3]||(a[3]=s=>u(z).status.dialog=s),class:"custom",draggable:"","close-on-click-modal":!1},{header:p((()=>[Y])),default:p((()=>[K,V,S])),footer:p((()=>[g(C,{onClick:a[2]||(a[2]=s=>u(z).status.dialog=!1)},{default:p((()=>[m(" 取 消 ")])),_:1})])),_:1},8,["modelValue"])],64)}}};export{C as _};
