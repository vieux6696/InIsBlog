import{a,c as l,n as e}from"./1711946477.index.js";import{a6 as s,y as t,aj as o,as as n,o as c,c as u,l as i,J as d,a as r,s as m,a2 as p,a3 as b,F as v,g as f,f as h,q as g}from"./1711946477.@vue.js";const w={class:"card mb-3"},y={class:"card-body"},j={class:"text-muted text-uppercase mt-0"},x=r("br",null,null,-1),V=r("br",null,null,-1),k={class:"d-inline-flex align-items-center"},_=r("span",{class:"ms-1"},"文章",-1),C={class:"m-b-20"},M=r("span",{class:"badge bg-success font-white"}," 更多 ",-1),T={class:"text-muted"},z=r("strong",{class:"flex-center"},"文章配置",-1),U={class:"row"},E={class:"col-md-6"},L={class:"form-group mb-3"},A={class:"form-label"},H=r("br",null,null,-1),I=r("br",null,null,-1),J=r("span",{class:"ms-1"},"编辑器：",-1),R={class:"font-13"},q={class:"text-muted float-end"},F={class:"col-md-6"},N={class:"form-group mb-3"},O={class:"form-label"},S=r("span",{class:"ms-1"},"审核：",-1),B={class:"font-13"},D={class:"text-muted float-end"},G={class:"col-md-6"},K={class:"form-group mb-3"},P={class:"form-label"},Q=r("span",{class:"ms-1"},"允许评论：",-1),W={class:"font-13"},X={class:"text-muted float-end"},Y={class:"col-md-6"},Z={class:"form-group mb-3"},$={class:"form-label"},aa=r("span",{class:"ms-1"},"显示评论：",-1),la={class:"font-13"},ea={class:"text-muted float-end"},sa={__name:"article",setup(sa,{expose:ta}){const oa=s({cache:{name:"article",json:{editor:"tinymce"}},struct:{key:"ARTICLE",json:{comment:{allow:1,show:1},audit:1}},status:{finish:!1,loading:!0,dialog:!1},select:{editor:[{value:"tinymce",label:"富文本"},{value:"vditor",label:"Markdown"}],comment:{allow:[{value:1,label:"允许"},{value:0,label:"禁止"}],show:[{value:1,label:"显示"},{value:0,label:"隐藏"}]},audit:[{value:1,label:"开启",subtitle:"严格一点，防止乱搞"},{value:0,label:"关闭",subtitle:"宽松一点，方便用户"}]}});t((async()=>{await na.init()}));const na={init:async()=>{na.cache(),oa.status.finish=!1,oa.status.loading=!0;const{code:l,data:e}=await a.get("/api/config/one",{key:"ARTICLE"});oa.status.loading=!1,200===l&&(oa.struct=e,oa.status.finish=!0)},change:async a=>{l.set(oa.cache.name,{...oa.cache.json,editor:a})},show(){if(!oa.status.finish)return e.warn("配置获取失败，无法进行配置！");oa.status.dialog=!0},save:async()=>{oa.status.wait=!0;const{code:s,msg:t}=await a.post("/api/config/save",{...oa.struct,json:JSON.stringify(oa.struct.json)});if(oa.status.wait=!1,200!==s)return e.error("保存失败："+t);oa.status.dialog=!1,l.set(oa.cache.name,oa.cache.json)},cache:(a=oa.cache.json)=>{l.has(oa.cache.name)?oa.cache.json=l.get(oa.cache.name):l.set(oa.cache.name,a)}};return ta({init:na.init}),(a,l)=>{const e=o("i-svg"),s=o("el-tooltip"),t=o("el-switch"),sa=o("el-option"),ta=o("el-select"),ca=o("el-button"),ua=o("el-dialog"),ia=n("loading");return c(),u(v,null,[i((c(),u("div",w,[r("div",y,[m(e,{name:"editor",color:"rgb(var(--assist-color))",size:"43px",class:"position-absolute opacity-25",style:{right:"2rem"}}),r("h6",j,[m(s,{placement:"top"},{content:p((()=>[b(" ● Markdown编辑器：Vditor支持所见即所得、即时渲染（类似 Typora）和分屏预览模式。"),x,b(" ● 富文本编辑器：TinyMCE是一个基于浏览器的所见即所得富文本编辑器，用于编辑HTML文档。"),V])),default:p((()=>[r("span",k,[m(e,{name:"hint",color:"rgb(var(--icon-color))",size:"14px"}),_])])),_:1})]),r("h2",C,[m(t,{modelValue:d(oa).cache.json.editor,"onUpdate:modelValue":l[0]||(l[0]=a=>d(oa).cache.json.editor=a),onChange:na.change,disabled:!d(oa).status.finish,"active-value":"tinymce","inactive-value":"vditor","active-text":"富文本","inactive-text":"Markdown"},null,8,["modelValue","onChange","disabled"])]),M,r("span",T,[b(" 其它配置信息，"),r("span",{onClick:l[1]||(l[1]=a=>na.show()),class:"text-dark pointer"},"点我配置")])])])),[[ia,d(oa).status.loading]]),m(ua,{modelValue:d(oa).status.dialog,"onUpdate:modelValue":l[8]||(l[8]=a=>d(oa).status.dialog=a),class:"custom",draggable:"","close-on-click-modal":!1},{header:p((()=>[z])),default:p((()=>[r("div",U,[r("div",E,[r("div",L,[r("label",A,[m(s,{placement:"top"},{content:p((()=>[b(" ● Markdown编辑器：Vditor支持所见即所得、即时渲染（类似 Typora）和分屏预览模式。"),H,b(" ● 富文本编辑器：TinyMCE是一个基于浏览器的所见即所得富文本编辑器，用于编辑HTML文档。"),I])),default:p((()=>[r("span",null,[m(e,{color:"rgb(var(--icon-color))",name:"hint",size:"14px"}),J])])),_:1})]),m(ta,{modelValue:d(oa).cache.json.editor,"onUpdate:modelValue":l[2]||(l[2]=a=>d(oa).cache.json.editor=a),class:"d-block custom font-13",placeholder:"请选择"},{default:p((()=>[(c(!0),u(v,null,f(d(oa).select.editor,(a=>(c(),h(sa,{key:a.value,label:a.label,value:a.value},{default:p((()=>[r("span",R,g(a.label),1),r("small",q,g(a.value),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])]),r("div",F,[r("div",N,[r("label",O,[m(s,{content:"用户发布的文章，是否需要审核",placement:"top"},{default:p((()=>[r("span",null,[m(e,{color:"rgb(var(--icon-color))",name:"hint",size:"14px"}),S])])),_:1})]),m(ta,{modelValue:d(oa).struct.json.audit,"onUpdate:modelValue":l[3]||(l[3]=a=>d(oa).struct.json.audit=a),class:"d-block custom font-13",placeholder:"请选择"},{default:p((()=>[(c(!0),u(v,null,f(d(oa).select.audit,(a=>(c(),h(sa,{key:a.value,label:a.label,value:a.value},{default:p((()=>[r("span",B,g(a.label),1),r("small",D,g(a.subtitle),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])]),r("div",G,[r("div",K,[r("label",P,[m(s,{content:"是否允许用户评论",placement:"top"},{default:p((()=>[r("span",null,[m(e,{color:"rgb(var(--icon-color))",name:"hint",size:"14px"}),Q])])),_:1})]),m(ta,{modelValue:d(oa).struct.json.comment.allow,"onUpdate:modelValue":l[4]||(l[4]=a=>d(oa).struct.json.comment.allow=a),class:"d-block custom font-13",placeholder:"请选择"},{default:p((()=>[(c(!0),u(v,null,f(d(oa).select.comment.allow,(a=>(c(),h(sa,{key:a.value,label:a.label,value:a.value},{default:p((()=>[r("span",W,g(a.label),1),r("small",X,g(a.value),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])]),r("div",Y,[r("div",Z,[r("label",$,[m(s,{content:"是否显示评论",placement:"top"},{default:p((()=>[r("span",null,[m(e,{color:"rgb(var(--icon-color))",name:"hint",size:"14px"}),aa])])),_:1})]),m(ta,{modelValue:d(oa).struct.json.comment.show,"onUpdate:modelValue":l[5]||(l[5]=a=>d(oa).struct.json.comment.show=a),class:"d-block custom font-13",placeholder:"请选择"},{default:p((()=>[(c(!0),u(v,null,f(d(oa).select.comment.show,(a=>(c(),h(sa,{key:a.value,label:a.label,value:a.value},{default:p((()=>[r("span",la,g(a.label),1),r("small",ea,g(a.value),1)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])])])])),footer:p((()=>[m(ca,{onClick:l[6]||(l[6]=a=>d(oa).status.dialog=!1)},{default:p((()=>[b("取 消")])),_:1}),m(ca,{onClick:l[7]||(l[7]=a=>na.save()),loading:d(oa).status.wait},{default:p((()=>[b("保 存")])),_:1},8,["loading"])])),_:1},8,["modelValue"])],64)}}};export{sa as _};
