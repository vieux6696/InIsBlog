/* empty css                    */import{c as e,u as s,a as t,n,b as l,l as o,p as a,_ as i}from"./1711946477.index.js";import{M as r}from"./1711946477.markdown-it.js";import{a6 as c,y as d,aj as u,o as m,c as p,J as g,s as v,i as f,f as h,a2 as y,a as b,q as x,a3 as w,T as k,F as j,j as _,g as L,h as z,K as C,w as H}from"./1711946477.@vue.js";import{u as T}from"./1711946477.vue-router.js";import{_ as E}from"./1711946477.page.js";import"./1711946477.lscache.js";import"./1711946477.crypto-js.js";import"./1711946477.axios.js";import"./1711946477.element-plus.js";import"./1711946477.lodash-es.js";import"./1711946477.@element-plus.js";import"./1711946477.@popperjs.js";import"./1711946477.@ctrl.js";import"./1711946477.dayjs.js";import"./1711946477.async-validator.js";import"./1711946477.memoize-one.js";import"./1711946477.normalize-wheel-es.js";import"./1711946477.@floating-ui.js";import"./1711946477.notyf.js";import"./1711946477.pinia.js";import"./1711946477.lottie-web.js";import"./1711946477.bootstrap.js";import"./1711946477.plyr.js";import"./1711946477.@fancyapps.js";import"./1711946477.highlight.js.js";import"./1711946477.@howdyjs.js";import"./1711946477.entities.js";import"./1711946477.uc.micro.js";import"./1711946477.mdurl.js";import"./1711946477.linkify-it.js";import"./1711946477.punycode.js";const q={key:0,class:"wh-30px position-relative upgrade-system"},V={class:"font-14"},M={class:"me-1"},S={class:"me-1"},$={key:0},A=b("span",{class:"ms-1"},"发现新的 inis 版本，是否立即更新？",-1),F={key:0,class:"container-xxl mt-2 markdown"},Y=["innerHTML"],D={key:1},I=b("span",{class:"ms-1"},"更新已完成，但还需要等待后续操作",-1),O=b("span",{class:"fw-bolder font-12"},"宝塔用户等两分钟",-1),U={class:"card radius-10"},P={class:"card-body p-2"},K=b("p",null,"如果您是宝塔用户，且满足以下条件，只需要等待两分钟即可",-1),N=b("p",null,"1、【次要】使用了 Go项目 部署的本程序",-1),W=b("p",null,"2、【重要】勾选了 开机启动（默认守护进程2分钟）",-1),B=b("span",{class:"fw-bolder font-12"},"急！一刻都不想等",-1),G={class:"card radius-10"},J={class:"card-body p-2"},X=b("p",null,"如果您比较着急，希望马上启动本程序，按照以下步骤操作即可",-1),Q=b("p",null,"1、找到本程序的启动按钮（windows系统双击可执行程序）",-1),R=b("p",null,"2、点击启动项目",-1),Z={key:0,class:"modal-footer d-flex justify-content-center"},ee={__name:"system",setup(l){const o=c({item:{tabs:"wait",dialog:!1},loading:{finish:!1,upgrade:!1},lottie:{show:!1,play:!1},struct:{version:null},version:null,select:{progress:[{value:"design",label:"设计"},{value:"dev",label:"开发"},{value:"test",label:"测试"},{value:"pro",label:"正式"},{value:"abandon",label:"停止维护"}]},user:e.get("user-info")||{}});d((async()=>{var e,s,t;!0===(null==(t=null==(s=null==(e=o.user)?void 0:e.result)?void 0:s.auth)?void 0:t.all)&&await a.check()}));const a={check:async()=>{var t,n,l;await a.next(),await a.version(),s.compare.version(null==(t=o.struct)?void 0:t.version,o.version)&&(o.lottie.show=!0,(null==(n=o.struct)?void 0:n.version)!==(null==(l=e)?void 0:l.get("system-version-ignore"))&&(o.lottie.play=!0))},version:async()=>{const s="system-version-local";if(e.has(s))return void(o.version=e.get(s));const{code:n,data:l}=await t.get("/dev/info/version");200===n&&(o.version=null==l?void 0:l.inis,e.set(s,null==l?void 0:l.inis,inis.cache))},next:async()=>{const s="system-version-next";if(e.has(s))return void(o.struct=e.get(s));const{data:n}=await t.get("/inis/system-version/next",{progress:"pro"});o.struct=n,e.set(s,n,inis.cache)},progress:e=>{const s=o.select.progress.find((s=>s.value===e));return s?s.label:""},markdown:e=>(new r).render(e),upgrade:async()=>{var s;e.del("system-version-local"),o.loading.upgrade=!0;const{code:l,msg:a}=await t.post("/api/upgrade/system",{id:null==(s=o.struct)?void 0:s.id});if(200!==l)return o.loading.upgrade=!1,n.error(a);o.lottie.play=!1,o.loading.finish=!0,o.loading.upgrade=!1,n.success("升级成功！")},ignore:async()=>{var s;e.set("system-version-ignore",null==(s=o.struct)?void 0:s.version,10080),o.lottie.play=!1,o.item.dialog=!1},close:()=>{o.loading.finish&&(o.lottie.show=!1)}};return(e,t)=>{const n=u("i-lottie"),l=u("i-svg"),i=u("el-alert"),r=u("el-scrollbar"),c=u("el-image"),d=u("el-tab-pane"),_=u("el-tabs"),L=u("el-button"),z=u("el-dialog");return m(),p(j,null,[g(o).lottie.show?(m(),p("span",q,[v(n,{name:"bell",modelValue:g(o).lottie.play,"onUpdate:modelValue":t[0]||(t[0]=e=>g(o).lottie.play=e),onClick:t[1]||(t[1]=e=>g(o).item.dialog=!0),class:"lottie"},null,8,["modelValue"])])):f("",!0),(m(),h(k,{to:"body"},[v(z,{modelValue:g(o).item.dialog,"onUpdate:modelValue":t[5]||(t[5]=e=>g(o).item.dialog=e),class:"custom pt-0 pb-0","close-on-click-modal":!1,onClose:a.close},{header:y((()=>{var e,s;return[b("strong",V,[b("span",null,x(g(o).struct.title)+"：",1),b("span",M,x(null==(s=null==(e=g(o).struct.result)?void 0:e.theme)?void 0:s.title),1),b("span",S,x(a.progress(g(o).struct.progress))+"版本",1),b("span",null,x(g(o).struct.version),1)])]})),default:y((()=>[g(o).loading.finish?(m(),p("div",D,[v(i,{type:"success",closable:!1,center:"",class:"mb-3 box-shadow-light"},{title:y((()=>[v(l,{name:"!",size:"15px",color:"var(--el-color-success)"}),I])),_:1}),v(_,{modelValue:g(o).item.tabs,"onUpdate:modelValue":t[2]||(t[2]=e=>g(o).item.tabs=e),id:"tabs-area",class:"tag"},{default:y((()=>[v(d,{name:"wait"},{label:y((()=>[O])),default:y((()=>[b("div",U,[b("div",P,[K,N,W,v(c,{src:"/assets/imgs/png/upgrade-1.png",class:"w-100"})])])])),_:1}),v(d,{name:"worry"},{label:y((()=>[B])),default:y((()=>[b("div",G,[b("div",J,[X,Q,R,v(c,{src:"/assets/imgs/png/upgrade-2.png",class:"w-100"})])])])),_:1})])),_:1},8,["modelValue"])])):(m(),p("div",$,[v(i,{type:"success",closable:!1,center:"",class:"box-shadow-light"},{title:y((()=>[v(l,{name:"!",size:"15px",color:"var(--el-color-success)"}),A])),_:1}),g(s).is.empty(g(o).struct.content)?f("",!0):(m(),p("div",F,[v(r,{"max-height":"400px"},{default:y((()=>[b("div",{innerHTML:a.markdown(g(o).struct.content),class:"white-space-line"},null,8,Y)])),_:1})]))]))])),footer:y((()=>[g(o).loading.finish?f("",!0):(m(),p("div",Z,[v(L,{onClick:t[3]||(t[3]=e=>a.ignore()),disabled:g(o).loading.upgrade},{default:y((()=>[w("忽略本次更新")])),_:1},8,["disabled"]),v(L,{onClick:t[4]||(t[4]=e=>a.upgrade()),loading:g(o).loading.upgrade},{default:y((()=>[w(x(g(o).loading.upgrade?"正在更新":"立即更新"),1)])),_:1},8,["loading"])]))])),_:1},8,["modelValue","onClose"])]))],64)}}},se={class:"topnav"},te={class:"container-fluid user-select-none"},ne={class:"navbar navbar-dark navbar-expand-lg topnav-menu py-1"},le={class:"collapse navbar-collapse justify-content-between"},oe={class:"d-flex align-items-center"},ae=["innerHTML"],ie={class:"ms-1"},re={class:"d-flex flex-column align-items-end user-select-text me-2"},ce={key:0,class:"font-14 scale-90"},de={class:"badge item left bg-dark px-2 py-1",style:{color:"#fff"}},ue={class:"badge item right bg-warning px-2 py-1"},me={key:1},pe={class:"d-lg-none d-black"},ge={class:"d-flex justify-content-between"},ve={class:"font-14"},fe={key:0,class:"mx-2"},he={class:"d-block wh-30px"},ye={class:"d-flex flex-column"},be={class:"flex-center mb-3"},xe={key:0,class:"d-flex flex-column"},we=b("p",{class:"mb-2 fw-medium font-14 d-flex align-items-center"},[b("span",{class:"me-1 w-2px h-16px bg-info radius-4"}),w(" 个人信息 ")],-1),ke={class:"card card-body position-relative mb-0 nav-bg"},je={class:"d-flex"},_e={class:"d-flex align-items-center position-absolute",style:{top:"5px",left:"70px"}},Le={class:"text-dark font-15 fw-bolder"},ze={class:"badge badge-outline-warning item right ms-1 scale-90"},Ce={class:"mt-2 pt-1 mb-0 font-13"},He=b("p",{class:"fw-medium font-14 d-flex align-items-center mb-0"},[b("span",{class:"me-1 w-2px h-16px bg-info radius-4"}),w(" 导航菜单 ")],-1),Te={class:"d-flex align-items-center"},Ee=["innerHTML"],qe={class:"font-14 fw-medium"},Ve={class:"flex-center"},Me={__name:"nav",setup(e){const t=T(),n={comm:l()},i=c({theme:"white",drawer:{show:!1,menu:!0},menu:[]});d((async()=>{i.menu=await o()})),_((async()=>{await r.getTheme()}));const r={async getTheme(){let e=document.querySelector("body").getAttribute("inis-theme");s.is.empty(e)||(-1!==e.indexOf("white")?i.theme="white":i.theme="dark")},fn:e=>{i.drawer.show=!1,e()},push:e=>{i.drawer.show=!1,a(e)},empty:e=>s.is.empty(e),router:(e={})=>t.push(e)};return(e,t)=>{var l;const o=u("el-image"),c=u("el-menu-item"),d=u("i-svg"),k=u("el-sub-menu"),_=u("el-menu"),C=u("el-avatar"),H=u("el-drawer");return m(),p(j,null,[b("div",se,[b("div",te,[b("nav",ne,[b("div",le,[v(_,{class:"navbar-nav w-100 custom","unique-opened":!0,"menu-trigger":"hover",mode:"horizontal","background-color":"transparent"},{default:y((()=>[v(c,{index:"/"},{default:y((()=>[v(o,{onClick:t[0]||(t[0]=e=>g(a)("/")),src:`/assets/imgs/logo-${g(i).theme}.png`,style:{width:"100px"},class:"d-flex flex-center"},null,8,["src"])])),_:1}),(m(!0),p(j,null,L(g(i).menu,((e,s)=>(m(),h(k,{key:s,index:s.toString(),"show-timeout":"50","hide-timeout":"50"},{title:y((()=>[b("span",oe,[b("i",{innerHTML:e.icon,style:{"margin-top":"-2px"},class:"nav-icon"},null,8,ae),b("span",ie,x(e.label),1)])])),default:y((()=>[(m(!0),p(j,null,L(e.children,((e,s)=>(m(),h(c,{key:s,index:s.toString(),onClick:s=>e.fn()},{default:y((()=>[v(d,{name:e.icon,size:e.size,class:"me-1"},null,8,["name","size"]),w(" "+x(e.label),1)])),_:2},1032,["index","onClick"])))),128))])),_:2},1032,["index"])))),128))])),_:1}),v(_,{"unique-opened":!0,mode:"horizontal",class:"navbar-nav d-flex align-items-center justify-content-end w-100","background-color":"transparent"},{default:y((()=>[v(c,{index:"1"},{default:y((()=>[v(ee)])),_:1}),v(k,{"show-timeout":"50","hide-timeout":"50",index:"login-user",class:"icon-none"},{title:y((()=>{var e,t,l,o,a,i;return[b("div",re,[g(s).is.empty(null==(e=n.comm.getLogin.user)?void 0:e.title)?(m(),p("strong",me,x(null==(o=n.comm.getLogin.user)?void 0:o.nickname),1)):(m(),p("span",ce,[b("strong",de,x(null==(t=n.comm.getLogin.user)?void 0:t.nickname),1),b("span",ue,x(null==(l=n.comm.getLogin.user)?void 0:l.title),1)])),b("small",null,x(null==(a=n.comm.getLogin.user)?void 0:a.email),1)]),v(C,{src:null==(i=n.comm.getLogin.user)?void 0:i.avatar,shape:"square",size:"medium"},null,8,["src"])]})),default:y((()=>[v(c,{onClick:t[1]||(t[1]=e=>r.push({path:"/admin"})),index:"/admin"},{default:y((()=>[v(d,{name:"console",size:"16px",class:"me-1"}),w(" 控制台 ")])),_:1}),v(c,{onClick:t[2]||(t[2]=e=>r.push({path:"/admin/account/home"})),index:"/admin/account/home"},{default:y((()=>[v(d,{name:"personal",size:"15px",class:"me-1"}),w(" 个人中心 ")])),_:1}),v(c,null,{default:y((()=>[v(d,{name:"logout",size:"16px",class:"me-1"}),b("span",{onClick:t[3]||(t[3]=e=>n.comm.logout("/")),class:"w-100"},"退出登录")])),_:1})])),_:1})])),_:1})])]),b("nav",pe,[b("div",ge,[b("span",{onClick:t[4]||(t[4]=e=>g(i).drawer.show=!0),class:"wh-24px d-block ms-2"},[v(d,{name:"side",size:"22px",color:"rgb(var(--assist-color))"})]),b("small",ve,x(n.comm.nav.title),1),n.comm.getLogin.finish?(m(),p("div",{key:1,onClick:t[5]||(t[5]=e=>g(a)({path:"/admin"})),class:"d-flex align-items-center justify-content-center",style:{"margin-top":"-8px"}},[b("span",he,[v(ee)]),v(C,{src:null==(l=n.comm.getLogin.user)?void 0:l.avatar,size:26,class:"mx-2 mirror-scan"},null,8,["src"])])):(m(),p("span",fe,[v(d,{name:"user",size:"26px",color:"rgb(var(--assist-color))"})]))])])])]),v(H,{modelValue:g(i).drawer.show,"onUpdate:modelValue":t[10]||(t[10]=e=>g(i).drawer.show=e),direction:"ltr",size:"75%","show-close":!1,class:"custom side"},{header:y((()=>{var e,s,l,a;return[b("div",ye,[b("span",be,[v(o,{onClick:t[6]||(t[6]=e=>r.push("/")),src:`/assets/imgs/logo-${g(i).theme||"white"}.png`,style:{width:"100px"},class:"d-flex flex-center"},null,8,["src"])]),n.comm.getLogin.finish?(m(),p("div",xe,[we,v(o,{src:"https://inis.cn/api/file/rand?name=imgs.txt&size=250x120",style:{height:"120px","border-radius":"6px 6px 0 0"},fit:"cover"}),b("div",ke,[b("div",je,[v(C,{src:null==(e=n.comm.getLogin.user)?void 0:e.avatar,size:50,class:"position-absolute avatar-shadow mirror-scan",style:{top:"-25px"},shape:"square"},null,8,["src"]),b("div",_e,[b("span",Le,x(null==(s=n.comm.getLogin.user)?void 0:s.nickname),1),b("span",ze,x(null==(l=n.comm.getLogin.user)?void 0:l.title),1)]),b("p",Ce,x((null==(a=n.comm.getLogin.user)?void 0:a.description)||"这个人很懒，什么都没留下！"),1)])])])):f("",!0)])]})),default:y((()=>[He,v(_,{class:"nav-bg my-1 custom","unique-opened":""},{default:y((()=>[(m(!0),p(j,null,L(g(i).menu,((e,s)=>(m(),h(k,{key:s,index:e.name.toString(),"show-timeout":"50","hide-timeout":"50"},{title:y((()=>[b("span",Te,[b("i",{innerHTML:e.icon,style:{"margin-top":"-2px"},class:"nav-icon"},null,8,Ee),b("span",{class:"ms-1",style:z(1===s?"margin-left: 1px !important":"")},x(e.label),5)])])),default:y((()=>[(m(!0),p(j,null,L(e.children,((e,s)=>(m(),h(c,{key:s,index:e.path.toString(),onClick:s=>r.fn(e.fn())},{default:y((()=>[b("span",qe,x(e.label),1)])),_:2},1032,["index","onClick"])))),128))])),_:2},1032,["index"])))),128))])),_:1})])),footer:y((()=>[b("span",Ve,[b("span",{onClick:t[7]||(t[7]=e=>r.push({path:"/admin"})),class:"flex-center mx-1"},[v(d,{color:"rgb(var(--assist-color))",name:"console",size:"18px",class:"me-1"})]),b("span",{onClick:t[8]||(t[8]=e=>r.push({path:"/admin/account/home"})),class:"flex-center mx-1"},[v(d,{color:"rgb(var(--assist-color))",name:"personal",size:"18px",class:"me-1"})]),b("span",{onClick:t[9]||(t[9]=e=>n.comm.logout("/")),class:"flex-center mx-1"},[v(d,{color:"rgb(var(--assist-color))",name:"logout",size:"17px",class:"me-1"})])])])),_:1},8,["modelValue"])],64)}}},Se={ref:"pointer",id:"pointer"},$e={id:"background"},Ae={ref:"cover",class:"cover",style:{opacity:"1",transition:"all 1.5s ease 0s"}},Fe={id:"go-to-top",ref:"go-to-top",class:"d-none"},Ye={class:"flex-center p-0",type:"button"},De=i({__name:"beautify",setup(e){const{ctx:t,proxy:n}=C(),l=Math.round((new Date).getTime()/1e3),o=c({cover:`https://api.inis.cc/api/file/random?name=cure&unix=${l}`});return _((()=>{const e=n.$refs.pointer,t=e.offsetWidth/2,l=(s,n)=>{e.style.transform=`translate(${s-t+1}px, ${(()=>{let e=0;return document.documentElement&&document.documentElement.scrollTop?e=document.documentElement.scrollTop:document.body&&(e=document.body.scrollTop),e})()+n-t+1}px)`};document.querySelector("body").addEventListener("mousemove",(e=>window.requestAnimationFrame((()=>{l(e.clientX,e.clientY)}))));const o=document.querySelector("#loading-box");o&&setTimeout((()=>o.classList.add("loaded")),500);const a=n.$refs.cover;n.$refs["bg-img"],a.style.setProperty("opacity",0),a.style.setProperty("transition","all 1.5s ease 0s"),Boolean(window.navigator.userAgent.match(/AppWebKit.*Mobile.*/))&&(e.style.display="none"),window.onscroll=()=>{let[e,t]=[null,!0],l=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;const o=n.$refs["go-to-top"];o.style.setProperty("display",l>300?"block":"none","important"),o.addEventListener("click",(()=>{t=!0,e=setTimeout((()=>{t&&s.to.scroll(0)}),150)})),o.addEventListener("dblclick",(()=>{clearTimeout(e),t=!1,s.to.scroll(a())}));const a=()=>{let e=0;return e=document.body.clientHeight&&document.documentElement.clientHeight?document.body.clientHeight<document.documentElement.clientHeight?document.body.clientHeight:document.documentElement.clientHeight:document.body.clientHeight>document.documentElement.clientHeight?document.body.clientHeight:document.documentElement.clientHeight,Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)-e}}})),(e,s)=>{const t=u("el-image"),n=u("i-svg");return m(),p(j,null,[b("div",Se,null,512),b("div",$e,[v(t,{src:"/assets/imgs/bg.webp",fit:"cover",style:{width:"100%",height:"100%",position:"fixed",left:"0",top:"0"}},{error:y((()=>[v(t,{src:g(o).cover,fit:"cover",style:{width:"100%",height:"100%",position:"fixed",left:"0",top:"0"}},null,8,["src"])])),_:1}),b("div",Ae,null,512)]),b("div",Fe,[b("button",Ye,[v(n,{name:"go-to-top",size:"30px"})])],512)],64)}}},[["__scopeId","data-v-052a89ff"]]),Ie={id:"footer",class:"text-dark user-select-none"},Oe={key:0},Ue=["href"],Pe={key:1},Ke=["href"],Ne={href:"https://inis.cc",target:"_blank",class:"text-dark"},We={__name:"footer",setup(n){const l=c({year:{start:null,end:(new Date).getFullYear()},site:{show:!1,struct:{copy:{}}},version:{theme:inis.version,system:"3.0.0"}}),o=async()=>{const s="site-info";if(e.has(s))return void(l.site.struct=e.get(s));const{code:n,data:o}=await t.get("/api/config/one",{key:"SITE_INFO"});200===n&&(l.site.struct=o.json,e.set(s,o.json,inis.cache))},a=async()=>{const s="system-version-local";if(e.has(s))return void(l.version.system=e.get(s));const{code:n,data:o}=await t.get("/dev/info/version");200===n&&(l.version.system=null==o?void 0:o.inis,e.set(s,null==o?void 0:o.inis,inis.cache))},i=(e=Math.round(new Date/1e3))=>{const s=1e3*parseInt(e);return new Date(s).getFullYear()};return d((async()=>{await o(),await a()})),H((()=>l.site.struct),(e=>{l.site.show=!s.is.empty(e)})),H((()=>l.site.struct),(e=>{s.is.empty(null==e?void 0:e.date)||(l.year.start=i(null==e?void 0:e.date))})),(e,t)=>{var n,o,a,i,r,c,d,u,v,h;return m(),p("footer",Ie,[b("span",null,"Copyright © "+x(g(l).year.start)+" ~ "+x(g(l).year.end),1),g(l).site.show?(m(),p("span",Oe,[w(" & "),b("a",{href:null==(o=null==(n=g(l).site.struct)?void 0:n.copy)?void 0:o.link,target:"_blank",class:"text-dark"},x((null==(i=null==(a=g(l).site.struct)?void 0:a.copy)?void 0:i.code)||"备案码"),9,Ue)])):f("",!0),g(s).is.empty(null==(c=null==(r=g(l).site.struct)?void 0:r.police)?void 0:c.code)?f("",!0):(m(),p("span",Pe,[w(" & "),b("a",{href:null==(u=null==(d=g(l).site.struct)?void 0:d.police)?void 0:u.link,target:"_blank",class:"text-dark"},x((null==(h=null==(v=g(l).site.struct)?void 0:v.police)?void 0:h.code)||"公安备案"),9,Ke)])),b("span",null,[w(" & "),b("a",Ne,"inis "+x(g(l).version.system),1)]),b("span",null," & theme "+x(g(l).version.theme),1)])}}},Be={__name:"base",setup:e=>(_((()=>{const e=document.querySelector("body");e.setAttribute("data-layout","topnav"),e.setAttribute("inis-theme","white"),e.classList.add("user-select-none");document.querySelector("#app").classList.add("admin")})),(e,s)=>{const t=u("router-view");return m(),p(j,null,[v(De),v(Me),v(t),v(We),v(E)],64)})};export{Be as default};
