import{a as e,u as a,n as t}from"./1711946477.index.js";import{C as o}from"./1711946477.@howdyjs.js";import{a6 as n,aj as r,as as l,o as i,c as s,l as c,J as p,f as g,a2 as d,a0 as u,F as m,g as y,ad as b,q as h,i as f,h as C,a as k,s as w}from"./1711946477.@vue.js";const v={class:"mt-2"},S={key:0,class:"float-start"},x={class:"float-end custom"},z={__name:"i-table",props:{opts:{type:Object,default:{url:"",method:"get",params:{},headers:{},columns:[],menu:{}},required:!0},table:{type:Object,default:{defaultSort:{prop:"id",order:"descending"},rowStyle:{backgroundColor:"rgba(var(--theme-color), calc(var(--theme-opacity) * 0.8))"},cellStyle:{backgroundColor:"transparent",border:"unset",padding:"10px 0"},headerRowStyle:{backgroundColor:"transparent !important"},headerCellStyle:{backgroundColor:"rgba(var(--theme-color), var(--theme-opacity))",border:"unset"},style:{background:"rgba(var(--theme-color), calc(var(--theme-opacity) * 0.15))",backdropFilter:"blur(10px)",borderRadius:"8px"}}},pagination:{type:Object,default:{count:5,single:!0,class:"custom",background:!0,sizes:[10,50,100,500],layout:"sizes, prev, pager, next"}}},emits:["selection:change"],setup(z,{expose:_,emit:j}){const R=j,$=z,A=n({item:{data:[],count:0,page:{code:1,total:1},limit:$.pagination.sizes[0],order:"create_time asc",loading:{data:!1,page:!1},selection:[]},config:{table:{defaultSort:{prop:"id",order:"descending"},rowStyle:{backgroundColor:"rgba(var(--theme-color), calc(var(--theme-opacity) * 0.8))"},cellStyle:{backgroundColor:"transparent",border:"unset"},headerRowStyle:{backgroundColor:"transparent !important"},headerCellStyle:{backgroundColor:"rgba(var(--theme-color), var(--theme-opacity))",border:"unset"},style:{background:"rgba(var(--theme-color), calc(var(--theme-opacity) * 0.65))",backdropFilter:"var(--theme-blur)"},...$.table},pagination:{count:5,single:!0,class:"custom",background:!0,sizes:[10,50,100,500],layout:"sizes, prev, pager, next",...$.pagination},opts:{url:"",method:"get",params:{},headers:{},columns:[],menu:{},...$.opts}}}),F={init:async(o=A.item.page.code,n=A.item.limit)=>{A.item.loading.data=!0;const{data:r,code:l,msg:i}=await e[A.config.opts.method](A.config.opts.url,{page:o,limit:n,order:A.item.order,...A.config.opts.params});if(!a.in.array(l,[200,204]))return t.error(i);A.item.data=r.data,A.item.count=r.count,A.item.page.total=r.page,A.item.page.code=o,A.item.loading.data=!1,A.item.loading.page=!1},empty:e=>a.is.empty(e),inArray:(e,t)=>a.in.array(e,t),format:e=>a.format.number(e),nature:e=>a.time.nature(e)},O={sizeChange:e=>{A.item.limit=e,F.init()},currentChange:e=>F.init(e),mouseMenu(e,a,t){const{x:n,y:r}=t,l=o({el:t.currentTarget,params:{row:{...e},select:[...A.item.selection.map((e=>({...e})))]},...A.config.opts.menu});A.config.opts.menu.hidden||l.show(n,r),t.preventDefault()},selectionChange(e){A.item.selection=e,R("selection:change",e)}};return _({init:F.init}),(e,a)=>{const t=r("el-table-column"),o=r("el-table"),n=r("el-pagination"),z=l("loading");return i(),s(m,null,[c((i(),g(o,{ref:"selected","element-loading-text":"数据加载中 ...","element-loading-size":"20",onSelectionChange:O.selectionChange,onRowContextmenu:O.mouseMenu,data:p(A).item.data,"row-style":p(A).config.table.rowStyle,"cell-style":p(A).config.table.cellStyle,"header-row-style":p(A).config.table.headerRowStyle,"header-cell-style":p(A).config.table.headerCellStyle,"default-sort":p(A).config.table.defaultSort,style:C(p(A).config.table.style)},{default:d((()=>[u(e.$slots,"start"),u(e.$slots,"default"),(i(!0),s(m,null,y(p(A).config.opts.columns,((a,o)=>(i(),g(t,{key:o,prop:a.prop,label:a.label,width:a.width,"class-name":a.class,fixed:a.fixed,sortable:a.sortable,align:F.inArray(a.prop,["create_time","update_time"])?"center":a.align},b({_:2},[a.slot?{name:"default",fn:d((t=>[u(e.$slots,"i-"+a.prop,{scope:t.row})])),key:"0"}:{name:"default",fn:d((e=>[F.inArray(a.prop,["create_time","update_time"])?(i(),s("span",{key:0},[F.empty(e.row[a.prop])?(i(),s("strong",{key:1},"-")):(i(),s("span",{key:0},h(F.nature(e.row[a.prop])),1))])):f("",!0)])),key:"1"}]),1032,["prop","label","width","class-name","fixed","sortable","align"])))),128)),u(e.$slots,"end")])),_:3},8,["onSelectionChange","onRowContextmenu","data","row-style","cell-style","header-row-style","header-cell-style","default-sort","style"])),[[z,p(A).item.loading.data]]),k("div",v,[p(A).item.count>0?(i(),s("div",S," 总计 "+h(p(A).item.count)+" 条数据 ",1)):f("",!0),k("div",x,[w(n,{background:p(A).config.pagination.background,onSizeChange:O.sizeChange,onCurrentChange:O.currentChange,"page-sizes":p(A).config.pagination.sizes,layout:p(A).config.pagination.layout,"popper-class":p(A).config.pagination.class,"pager-count":p(A).config.pagination.count,"hide-on-single-page":p(A).config.pagination.single,"page-size":p(A).item.limit,"page-count":p(A).item.page.total},null,8,["background","onSizeChange","onCurrentChange","page-sizes","layout","popper-class","pager-count","hide-on-single-page","page-size","page-count"])])])],64)}}};export{z as _};
